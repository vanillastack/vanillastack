---
- name: Install basic required packages
  apt:
    pkg:
      - python3-pip
      - ansible
      - git
      - jq
      - python3-passlib
      - curl

- name: Install pip modules
  pip:
    name:
      - pyhelm
      - openshift
    extra_args: --ignore-installed

# TODO download helm from VanillaStack controlled servers  
- name: Download helm install script
  get_url:
    url: https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3
    dest: /tmp/get_helm.sh
    mode: 0700

- name: Install helm using install script
  command: /tmp/get_helm.sh
